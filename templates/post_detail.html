<!DOCTYPE html>
<html>
<head>
    <title>Post Detail</title>
</head>
<body>

  <h1>All Posts and Comments</h1>

  {% for post in posts %}
    <div>
      <h2>{{ post.caption }}</h2>
      <img src="{{ post.image.url }}" alt="{{ post.caption }}">
      
      <p>Posted by: {{ post.author.username }} on {{ post.date_posted }}</p>

      <h3>Comments</h3>
      <ul>
        {% for comment in comments %}
          <li>{{ comment.content }} - {{ comment.user.username }} ({{ comment.created_at }})</li>
        {% endfor %}
      </ul>

      <h3>Add a Comment</h3>
      <form method="post" action="{% url 'post_detail' post.id %}">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Submit</button>
      </form>
    </div>
  {% endfor %}

</body>
</html>